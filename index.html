<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monika</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="main.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
<style>
body{
    background-color: #00000F;
}    
.container{
    padding: 20px;
    background-color: #00000F;
}            
</style>
</head>
<body>
    <div class="container" style="margin-top: 10%;">
        <form>
            <div class="form-group">
                <label style="color: #fff;">Text: </label>
                <textarea class="form-control" id="input">I love Monika</textarea>
            </div>
            <div class="form-group">
                <label style="color: #fff;">Complexity: </label>
                <input class="form-control" id="complexity" type="number" value="5"/>
            </div>
            <input id="button" type="button" value="Convert" class="btn btn-primary"/>
        </form>
        <br/>
     
        <div id="output">
            <div class="alert alert-primary" role="alert">
                <b>String:&nbsp;&nbsp;</b><br/>
                <span id="outputStr"></span>
            </div>
            <div class="alert alert-warning" role="alert">
                <details>
                    <summary><b>Code:&nbsp;&nbsp;</b></summary>
                    <span id="outputCode"></span>
                </details>
            </div>
        </div>
        <br/>
        
        <div id="copyBtn">
            <button id="copyStr" class="btn btn-outline-primary" >Copy String</button>&nbsp;<button id="copyCode" class="btn btn-outline-warning" >Copy Code</button>
            <span id="success" style="color: #007bff;"></span>
        </div>
    </div>
    <script>
        $("#output").hide();
        $("#copyBtn").hide();
        $("#success").hide();
        function getRandomSubarray(arr, size) {
            var shuffled = arr.slice(0), i = arr.length, temp, index;
            while (i--) {
                index = Math.floor((i + 1) * Math.random());
                temp = shuffled[index];
                shuffled[index] = shuffled[i];
                shuffled[i] = temp;
            }
            return shuffled.slice(0, size);
        }
        
        function copyToClipboard(element) {
          var $temp = $("<input>");
          $("body").append($temp);
          $temp.val($(element).text()).select();
          document.execCommand("copy");
          $temp.remove();
        }
        
        var charCode = []
        for (var i = 768; i < 880; i++) {
            if (i == 856){
                continue
            }
            charCode.push("&#" + i.toString() + ";")
        }
        
        $("#button").click(function(){
            var text = $("#input").val();
            var complexity = $("#complexity").val();
            var newText = ""
            for (var i in text) {
                if (text[i] == " "){
                    newText += " "
                    continue
                }
                var codes = text[i];
                var codeList = getRandomSubarray(charCode, complexity);
                for(var j in codeList){
                    codes += codeList[j];
                }
                newText += codes;
            }
            $("#outputStr").html(newText);
            $("#outputCode").text(newText);
            $("#copyBtn").show();
            $("#output").show();
            $("#success").hide();
        });
        
        $("#copyStr").click(function(){
            var copyText = document.getElementById("outputStr");
            copyToClipboard(copyText);
            $("#success").show();
            $("#success").html("&nbsp;Copy string to clipboard successfully.");
            $("#success").attr("style", "color: #007bff;");
        });
        
        $("#copyCode").click(function(){
            var copyText = document.getElementById("outputCode");
            copyToClipboard(copyText);
            $("#success").show();
            $("#success").html("&nbsp;Copy code to clipboard successfully.");
            $("#success").attr("style", "color: #ffc107;");
        });
    </script>
</body>